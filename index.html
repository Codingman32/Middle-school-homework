<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title id="page-title">Google Docs</title>
  <link id="favicon" rel="icon" href="https://ssl.gstatic.com/docs/doclist/images/infinite_arrow_favicon_5.ico" type="image/x-icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: black;
      color: lime;
      font-family: monospace;
      overflow: hidden;
    }

    #matrix-canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: -1;
      width: 100vw;
      height: 100vh;
    }

    #toolbar {
      display: flex;
      justify-content: space-between;
      background-color: rgba(0, 0, 0, 0.8);
      padding: 10px;
      font-weight: bold;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      padding: 10px;
      background-color: rgba(0, 0, 0, 0.7);
      overflow-y: auto;
    }

    .game-thumb {
      width: 80px;
      height: 80px;
      border: 2px solid lime;
      cursor: pointer;
    }

    iframe#gameFrame {
      width: 100%;
      height: 75vh;
      border: none;
      display: none;
    }

    #switchUrlBtn, #statusMessage {
      margin: 10px;
      padding: 5px 10px;
      background-color: black;
      color: lime;
      border: 1px solid lime;
      display: none;
    }

    #iframe-instructions {
      padding: 10px;
    }

    button {
      background-color: black;
      color: lime;
      border: 1px solid lime;
      padding: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<canvas id="matrix-canvas"></canvas>

<div id="toolbar">
  <div>Study Platform - Terminal Mode</div>
  <div>
    <button onclick="panic()">Panic</button>
    <button onclick="toggleFullScreen()">Fullscreen</button>
  </div>
</div>

<div class="button-group">
  <button onclick="cloak('Google Docs', 'https://ssl.gstatic.com/docs/doclist/images/infinite_arrow_favicon_5.ico')">Cloak as Google Docs</button>
  <button onclick="cloak('Google Drive', 'https://ssl.gstatic.com/docs/doclist/images/drive_2022q3_32dp.ico')">Cloak as Google Drive</button>
  <button onclick="cloak('Google Classroom', 'https://ssl.gstatic.com/classroom/favicon.png')">Cloak as Google Classroom</button>
</div>

<div class="button-group" id="gameButtons">
  <!-- Thumbnails for games -->
  <img src="https://img.icons8.com/ios-filled/100/retro-tv.png" alt="Retro Bowl" class="game-thumb" onclick="loadGame('https://retrobowlunblocked.github.io', 'https://ubg98.github.io')">
  <img src="https://img.icons8.com/ios-filled/100/joystick.png" alt="UBG44" class="game-thumb" onclick="loadGame('https://ubg44.github.io', 'https://ubg98.github.io')">
  <img src="https://img.icons8.com/ios-filled/100/controller.png" alt="UBG98" class="game-thumb" onclick="loadGame('https://ubg98.github.io', 'https://ubg44.github.io')">
  <img src="https://img.icons8.com/ios-filled/100/sniper-rifle.png" alt="1v1.LOL" class="game-thumb" onclick="loadGame('https://1v1.lol', 'https://1v1.lol')">
  <img src="https://img.icons8.com/ios-filled/100/mountain-biking.png" alt="Slope" class="game-thumb" onclick="loadGame('https://slopegame.online', 'https://geometrydashonline.com')">
  <img src="https://img.icons8.com/ios-filled/100/square.png" alt="Geometry Dash" class="game-thumb" onclick="loadGame('https://geometrydashonline.com', 'https://slopegame.online')">
  <img src="https://img.icons8.com/ios-filled/100/space-invaders.png" alt="Krunker" class="game-thumb" onclick="loadGame('https://krunker.io', 'https://alt.krunker.io')">
  <img src="https://img.icons8.com/ios-filled/100/alien.png" alt="Diep.io" class="game-thumb" onclick="loadGame('https://diep.io', 'https://alt.diep.io')">
</div>

<iframe id="gameFrame" sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe>
<button id="switchUrlBtn" onclick="switchToAltUrl()">Try Alternative Game</button>

<div id="statusMessage">Game Frame is OFF</div>

<div id="iframe-instructions">
  <p><strong>How the Game Frame Works:</strong></p>
  <p>The game iframe below is used to play various unblocked games directly on this page. If the game is blocked or fails, it will automatically switch to an alternate URL, and youâ€™ll get a manual option too.</p>
</div>

<script>
  let currentPrimaryUrl = '';
  let currentAltUrl = '';

  function loadGame(primaryUrl, altUrl) {
    currentPrimaryUrl = primaryUrl;
    currentAltUrl = altUrl;
    const frame = document.getElementById('gameFrame');
    frame.src = primaryUrl;
    frame.style.display = 'block';
    document.getElementById('switchUrlBtn').style.display = 'inline-block';
    document.getElementById('statusMessage').innerText = 'Game Loaded';
  }

  function switchToAltUrl() {
    document.getElementById('gameFrame').src = currentAltUrl;
  }

  function cloak(title, iconUrl) {
    document.title = title;
    document.getElementById('favicon').href = iconUrl;
  }

  function panic() {
    document.body.innerHTML = '<h1 style="color:black;">Loading Google Docs...</h1>';
    document.title = "Google Docs";
    document.getElementById('favicon').href = 'https://ssl.gstatic.com/docs/doclist/images/infinite_arrow_favicon_5.ico';
  }

  function toggleFullScreen() {
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  }

  // Matrix Effect
  const canvas = document.getElementById('matrix-canvas');
  const ctx = canvas.getContext('2d');
  canvas.height = window.innerHeight;
  canvas.width = window.innerWidth;
  const letters = Array(256).join("01").split("");
  const fontSize = 10;
  const columns = canvas.width / fontSize;
  const drops = Array.from({ length: columns }).fill(1);

  function drawMatrix() {
    ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#0F0";
    letters.forEach((letter, index) => {
      const x = index * fontSize;
      const y = drops[index] * fontSize;
      ctx.fillText(letter, x, y);
      if (y > canvas.height && Math.random() > 0.975) {
        drops[index] = 0;
      }
      drops[index]++;
    });
  }
  setInterval(drawMatrix, 50);

  // Surveillance tab detection (GoGuardian/Classwize)
  function detectMonitoringTabs() {
    const keywords = ['classwize', 'goguardian'];
    setInterval(() => {
      const title = document.title.toLowerCase();
      const url = window.location.href.toLowerCase();
      if (keywords.some(k => title.includes(k) || url.includes(k))) {
        alert("Monitoring software detected. Self-destruct initiated.");
        window.close();
        window.location.href = 'about:blank';
      }
    }, 3000);
  }
  detectMonitoringTabs();
</script>

</body>
</html>
